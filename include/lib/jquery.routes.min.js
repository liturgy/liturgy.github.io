!function(e,r){function t(e,r){for(var t=0;t<w.length;++t)if(w[t][1]==e)return h(w[t][0],r);return!1}function n(){var e=window.location.href.split("#");return e[1]&&(e[1].match(/^\//)||""==e[1])?e[1]:""}function u(r,t){var n=a(r),u=r!=v;return u||1!=t||(u=!0),j&&u&&n?(n[0]=o(n[0],n[2]),"callOriginal"in n[0]||l(r),e.routes.history.push([r,n[0],n[1]]),e.routes.dispatcher(n[0],n[1],r),!0):!1}function i(e,r){w.push([e,r]),y.push(p(e))}function a(e){for(var r=0;r<w.length;++r)if(w[r][0]==e)return[o(w[r][1],r),{},r];for(var r=0;r<y.length;++r){var t=y[r][0].exec(e);if(t){for(var n={},u=0;u<y[r][1].length;++u)n[y[r][1][u]]=t[3*(u+1)-1];return[o(w[r][1],r),n,r]}}return!1}function o(e,t){if("string"==typeof e&&"undefined"==typeof t){for(var n=0;n<w.length;++n)if(w[n][1]==e){t=n;break}throw"Method "+e+" not found in specified routes."}if("function"==typeof e)return e;var u=w[t][0],i=e.match(/\#(.+)$/);i=i?i[1]:"set";for(var a=e.replace(/\#.+$/,"").split("."),o=r[a[0]],n=1;n<a.length;++n)o=o[a[n]];if("undefined"==typeof o)throw'Could not find the object "'+a.join(".")+'"';if(o=o.instance(),"undefined"==typeof o[i])throw'The method "'+i+'" does not exist for the route "'+u+'"';if("callOriginal"in o[i])return o[i];var f=o[i];return o[i]=function(e){l(h(u,e)),f.apply(o,arguments)},o[i].callOriginal=function(){return f.apply(o,arguments)},o[i]}function f(){j=!1}function s(){d||m?(m=!0,j=!0):d=e(document).ready(function(){e.address.bind("externalChange",g),m=!0,j=!0,u(n(),!0)||u("/")})}function c(e){for(var r in e)i(r,e[r]);s()}function p(e){var r=[],t=String(e);return t=t.replace(/\((\:?[\w]+)\)/g,function(){return""+arguments[1]+"?"}),t=t.replace(/\:([\w]+)(\/?)/g,function(){return r.push(arguments[1]),"(([\\w]+)(/|$))"}),t=t.replace(/\)\?\/\(/g,")?("),t.match(/\*/)&&(r.push("path"),t=t.replace(/\*/g,"((.+$))?")),[new RegExp("^"+t+"$"),r]}function h(e,r){if(r=r||{},"string"==typeof r&&e.match(/\*/))e=e.replace(/\*/,r).replace(/\/\//g,"/");else{r.path&&(e=e.replace(/\*/,r.path.replace(/^\//,"")));var t=new RegExp("(\\()?\\:([\\w]+)(\\))?(/|$)","g");for(var n in r)"path"!=n&&(e=e.replace(t,function(){return arguments[2]==n?r[n]+arguments[4]:(arguments[1]||"")+":"+arguments[2]+(arguments[3]||"")+arguments[4]}))}return e=e.replace(/\([^\)]+\)/g,"")}function l(r){j&&v!=r&&(e.address.value(r),v=r)}function g(){if(j){var e=n();m&&e!=v&&u(e)}}if(Number(e.fn.jquery.replace(/\./g))<143)throw"jQuery Routes requires jQuery 1.4.3 or later.";e.routes=function(r,i){if("undefined"==typeof e.address)throw"jQuery Address (http://www.asual.com/jquery/address/) is required to run jQuery View Routes";if("function"==typeof r)e.address.bind("externalChange",function(){w(window.location.href.match("#")?window.location.href.split("#").pop():"")});else if(r===!1)e(e.address).unbind("externalChange");else{if("string"==typeof r){var p=r;if("start"==p)return s();if("stop"==p)return f();if("match"==p)return a(arguments[1]);if("set"==p)return u(arguments[1]);if("get"==p)return n();if("url"==p)return t(arguments[1],arguments[2]);if("setup"==p)return t(arguments[1]);if("add"==p)return t(arguments[1],arguments[2]);throw p+" is not a supported method."}for(var h in r)"string"!=typeof r[h]||r[h].match(/(\#|\.)/)||(r[h]+="#set");if(c(r),!i)for(var l=0;l<w.length;++l)o(w[l][1],l)}},e.routes.dispatcher=function(e,r){e(r)},e.routes.history=[];var d=!1,m=!1,w=[],y=[],v=!1,j=!1}(jQuery,this);