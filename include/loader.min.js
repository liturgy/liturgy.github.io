var lv ={"f":"home","name":""}; $.routes({"/":loadHome,"/home":loadHome, "/:f/":function(p){$.ajax({type:"POST",url:"sites/"+p.f+"/home.html",success:function(data){$("#content").html(data);am(p);},error:function(){$("#content").load("404.html");cl();},complete:function(){lv = p;}});}, "/:f/:v":function(p){$.ajax({type:"POST",url:"sites/"+p.f+"/"+p.v+".html",success:function(data){$("#content").html(data);am(p);},error:function(){$("#content").load("404.html");cl();},complete:function(){lv = p;}});}, "/:f/:v/:w":function(p){if(lv.f != p.f || lv.v != p.v){$.ajax({type:"POST",url:"sites/"+p.f+"/"+p.v+".html",success:function(data){$("#content").html(data);am(p);},error:function(){$("#content").load("404.html");cl();},complete:function(){lv = p;}});}$(window).scrollTop($('#' + p.w).offset().top);}});  function loadHome(){ $.ajax({type:"POST",url:"sites/home/home.html",success:function(data){$("#content").html(data);am({"f":"/"});},error:function(){$("#content").load("404.html");cl();},complete:function(){lv ={"f":"home","name":""};}});} function am(p){if(p.f != lv.f){$.ajax({method:"POST",url:function(){if(p.f == "/"){return "sites/home/aside_menu.html";}else{return "sites/" + p.f + "/aside_menu.html";}}(),success:function(data){$(".wrap-aside").html(data);},complete:function(){cl();}});}else{cl();} } function cl(){rc();$('.wrap-aside > ul a[href=' + window.location.hash + ']').addClass("current-page");} function rc(){$('.wrap-aside > ul a').removeClass("current-page");}